<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
   <meta name="description" content="Test site : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>DI Builder</title>
	
	<style>
canvas {
    border: 1px solid #d3d3d3;
    background-color: #f1f1f1;
}
</style>
	
  </head>

  <body onload = "startScript()">
	
	
<script>

class Leaf{
	constructor(text, parent){
		this.text = text;
		this.parent = parent;
	}
}
class Node{
	constructor(type, parent){
		this.type = type;
		this.parent = parent;
		this.text = type;
	}
}

class hjoin extends Node{
	constructor(type, parent){
		super(type, parent);
	}
}		

var aSquare;

function startScript(){
	aSquare = new mySquare(30, 30, "red", 10, 120);
	myCanvas.start();
	masterNode = new Node('masterNodeText', null);
	leaf1 = new Leaf('first leaf', masterNode);
	leaf2 = new Leaf('second leaf', masterNode);
	masterNode.left = leaf1;
	masterNode.right = leaf2;
	document.body.appendChild(document.createElement('br'));
	textPrintNodes(masterNode, 0);
}

function textPrintNodes(node, depth){
	if(node == undefined || node == null){
		return;
	}
	while(depth > 0){
		document.body.appendChild(document.createTextNode('\u00A0\u00A0\u00A0\u00A0'));
		depth = depth - 1;
	}
	document.body.appendChild(document.createTextNode(node.text));
	document.body.appendChild(document.createElement('br'));
	textPrintNodes(node.left, 1);
	textPrintNodes(node.right, 1);
}

var myCanvas = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 480;
        this.canvas.height = 270;
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
		window.addEventListener('keydown', function(e){keyMove(e.keyCode);});
		updateCanvas();
//		this.interval = setInterval(updateCanvas, (1000/30));
    },
	clear : function(){
		this.context.clearRect(0,0, this.canvas.width, this.canvas.height);
	}
}
	
function mySquare(width, height, color, x, y){
	this.width = width;
	this.height = height;
	this.x = x;
	this.y = y;
	this.update = function(){
		ctx = myCanvas.context;
		ctx.fillStyle = color;
		ctx.fillRect(this.x, this.y, this.width, this.height);
	}
}

function updateCanvas() {
    myCanvas.clear();
    aSquare.update();
}

function moveup() {
    aSquare.y -= 1;
	updateCanvas();
}

function movedown() {
    aSquare.y += 1;
	updateCanvas()
}

function moveleft() {
    aSquare.x -= 1;
	updateCanvas()
}

function moveright() {
    aSquare.x += 1;
	updateCanvas()
}

function keyMove(key){
	switch(key){
		case 37:
			moveleft();
			break;
		case 39:
			moveright();
			break;
		case 38:
			moveup();
			break;
		case 40:
			movedown();
			break;
		default:
			break;
	}
}

</script>
<br><br>
<button onclick="moveup()">UP</button>
<button onclick="movedown()">DOWN</button>
<button onclick="moveleft()">LEFT</button>
<button onclick="moveright()">RIGHT</button>
<button onclick="updateCanvas()">REDRAW</button>

    

  </body>
</html>
